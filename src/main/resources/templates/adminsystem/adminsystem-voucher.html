<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{sidebar.admin.vouchers}">Voucher</title>

    <link rel="stylesheet" th:href="@{/css/home.css}">
    <link rel="stylesheet" th:href="@{/css/adminsystem-voucher.css}">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Bootstrap -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body>

<div class="home-container">

    <!-- SIDEBAR -->
    <div th:replace="layouts/adminsystemsidebar :: adminSystemSidebar"></div>

    <!-- MAIN -->
    <div class="main-content">

        <!-- HEADER -->
        <div class="voucher-header">
            <h2 th:text="#{sidebar.admin.vouchers}">Voucher</h2>

            <button class="btn-add-voucher" id="btnOpenCreateVoucher">
                <i class="fa fa-plus"></i>
                <span th:text="#{voucher.add}">+ Add</span>
            </button>
        </div>

        <!-- LIST -->
        <div class="voucher-list" id="voucherContainer">
            <!-- JS render -->
        </div>

    </div>
</div>

<!-- ================= MODAL: CREATE VOUCHER ================= -->
<div class="modal fade" id="createVoucherModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">

            <form id="createVoucherForm">

                <div class="modal-header">
                    <h5 class="modal-title" th:text="#{voucher.create}">
                        Create Voucher
                    </h5>
                    <button type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">

                    <label class="form-label" th:text="#{voucher.code}">Code</label>
                    <input name="code"
                           class="form-control"
                           th:placeholder="#{voucher.code}"
                           required>

                    <label class="form-label mt-2" th:text="#{voucher.type}">Type</label>
                    <select name="type" class="form-select" required>
                        <option value="PERCENT">Percent</option>
                        <option value="FIXED">Fixed</option>
                    </select>

                    <label class="form-label mt-2" th:text="#{voucher.value}">Value</label>
                    <input name="value" type="number" class="form-control" required>

                    <label class="form-label mt-2" th:text="#{voucher.minOrder}">
                        Min Order
                    </label>
                    <input name="minOrder" type="number" class="form-control">

                    <label class="form-label mt-2" th:text="#{voucher.maxDiscount}">
                        Max Discount
                    </label>
                    <input name="maxDiscount" type="number" class="form-control">

                    <label class="form-label mt-2" th:text="#{voucher.startAt}">
                        Start Date
                    </label>
                    <input name="startAt" type="datetime-local" class="form-control" required>

                    <label class="form-label mt-2" th:text="#{voucher.endAt}">
                        End Date
                    </label>
                    <input name="endAt" type="datetime-local" class="form-control" required>

                    <label class="form-label mt-2" th:text="#{voucher.perUserLimit}">
                        Limit / User
                    </label>
                    <input name="perUserLimit"
                           type="number"
                           class="form-control"
                           value="1">
                </div>

                <div class="modal-footer">
                    <button type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                            th:text="#{modal.cancel}">
                        Cancel
                    </button>

                    <button type="submit"
                            class="btn btn-primary"
                            th:text="#{button1.create}">
                        Create
                    </button>
                </div>

            </form>

        </div>
    </div>
</div>
<script th:inline="javascript">
    const i18n = {
        loading: /*[[#{loading}]]*/ "Loading...",
        error: /*[[#{error}]]*/ "Error",
        empty: /*[[#{voucher.none}]]*/ "No vouchers",

        voucherType: /*[[#{voucher.type}]]*/ "Type",
        voucherValue: /*[[#{voucher.value}]]*/ "Value",
        voucherMinOrder: /*[[#{voucher.minOrder}]]*/ "Minimum order",
        voucherMaxDiscount: /*[[#{voucher.maxDiscount}]]*/ "Maximum discount",
        voucherTime: /*[[#{voucher.time}]]*/ "Time",

        statusActive: /*[[#{pitch.status.active}]]*/ "Active",
        statusInactive: /*[[#{pitch.status.inactive}]]*/ "Inactive",

        confirmDisable: /*[[#{voucher.confirmDisable}]]*/ "Are you sure?",
        disableFail: /*[[#{voucher.disableFail}]]*/ "Disable failed",
        createFail: /*[[#{voucher.createFail}]]*/ "Create failed"
    };
</script>


<!-- ================= JS ================= -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/adminsystem-vouchers.js"></script>

<script>
    loadAdminVouchers();

    document.getElementById("btnOpenCreateVoucher")
        .addEventListener("click", () => {
            new bootstrap.Modal(
                document.getElementById("createVoucherModal")
            ).show();
        });
</script>

</body>
</html>
