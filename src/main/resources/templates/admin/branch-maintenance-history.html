<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="#{maintenance.history.title}">Maintenance History</title>

  <!-- CSS -->
  <link rel="stylesheet" th:href="@{/css/home.css}">
  <link rel="stylesheet" th:href="@{/css/adminbranchbooking.css}">
  <link rel="stylesheet" th:href="@{/css/adminbranchmaintenance.css}">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body onload="loadMaintenanceHistory(0)">
<div class="home-container">

  <!-- üåê Language Switcher -->
  <div th:replace="layouts/langswitcher :: langSwitcher"></div>

  <!-- üß≠ Sidebar -->
  <div th:replace="layouts/adminbranchsidebar :: adminSidebar"></div>

  <!-- üß± Main Content -->
  <div class="main-content">
    <div class="maintenance-history-container">
      <h2 th:text="#{maintenance.history.title}">L·ªãch s·ª≠ b·∫£o tr√¨ s√¢n</h2>

      <!-- Toolbar -->
      <div class="bh-toolbar">
        <div class="bh-left">
          <label th:text="#{booking.history.show}">Hi·ªÉn th·ªã</label>
          <select id="pageSize" onchange="changePageSize(this.value)">
            <option value="10" selected>10</option>
            <option value="20">20</option>
            <option value="50">50</option>
          </select>
          <span th:text="#{booking.history.itemsPerPage}">m·ª•c / trang</span>
        </div>

        <!-- Filter -->
        <div class="filter-bar">
          <div class="filter-group">
            <div class="filter-box">
              <i class="fa fa-futbol"></i>
              <input type="text" id="filterPitchName"
                     th:placeholder="#{booking.table.pitch}"
                     onkeyup="applyFilters()">
            </div>
            <div class="filter-date">
              <i class="fa fa-calendar-alt"></i>
              <input type="datetime-local" id="filterStartDate" onchange="applyFilters()">
            </div>
            <div class="filter-date">
              <i class="fa fa-calendar-check"></i>
              <input type="datetime-local" id="filterEndDate" onchange="applyFilters()">
            </div>

            <button class="filter-reset" onclick="resetFilters()">
              <i class="fa fa-rotate-left"></i>
              <span th:text="#{filter.reset}">X√≥a b·ªô l·ªçc</span>
            </button>
          </div>
          <span id="summaryText"></span>
        </div>
      </div>

      <!-- Table -->
      <table class="booking-table">
        <thead>
        <tr>
          <th th:text="#{booking.table.no}">#</th>
          <th th:text="#{booking.table.pitch}">S√¢n</th>
          <th th:text="#{booking.table.branch}">Chi nh√°nh</th>
          <th th:text="#{maintenance.table.startTime}">Th·ªùi gian b·∫Øt ƒë·∫ßu</th>
          <th th:text="#{maintenance.table.endTime}">Th·ªùi gian k·∫øt th√∫c</th>
          <th th:text="#{maintenance.table.reason}">L√Ω do</th>
          <th th:text="#{action.title}">H√†nh ƒë·ªông</th>
        </tr>
        </thead>
        <tbody id="maintenanceList"></tbody>
      </table>

      <!-- Pagination -->
      <div class="pagination" id="pagination"></div>
    </div>
  </div>
</div>

<!-- üåê Inject i18n for JS -->
<script th:inline="javascript">
/*<![CDATA[*/
  const i18n = {
    table: {
      noData: /*[[#{maintenance.table.noData}]]*/ 'Kh√¥ng c√≥ d·ªØ li·ªáu'
    },
    action: {
      delete: /*[[#{action.delete}]]*/ 'X√≥a'
    },
    confirm: {
      delete: /*[[#{confirm.delete}]]*/ 'B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a l·ªãch b·∫£o tr√¨ n√†y kh√¥ng?'
    },
    alert: {
      notLoggedIn: /*[[#{auth.notLoggedIn}]]*/ 'B·∫°n ch∆∞a ƒëƒÉng nh·∫≠p',
      deleteSuccess: /*[[#{alert.deleteSuccess}]]*/ 'ƒê√£ x√≥a l·ªãch b·∫£o tr√¨ th√†nh c√¥ng!',
      deleteFail: /*[[#{alert.deleteFail}]]*/ 'Kh√¥ng th·ªÉ x√≥a l·ªãch b·∫£o tr√¨!'
    }
  };
/*]]>*/
</script>

<!-- JS -->
<script th:src="@{/js/auth.js}"></script>
<script th:src="@{/js/adminbranchmaintenance.js}"></script>
<script th:src="@{/js/lang-switcher.js}"></script>

</body>
</html>
